<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../custom_components/datalab-sidebar/datalab-sidebar.html">
<link rel="import" href="../../custom_components/datalab-toolbar/datalab-toolbar.html">
<link rel="import" href="../../custom_components/datalab-files/datalab-files.html">
<link rel="import" href="../../custom_components/datalab-data/datalab-data.html">
<link rel="import" href="../../custom_components/datalab-sessions/datalab-sessions.html">
<link rel="import" href="../../custom_components/datalab-editor/datalab-editor.html">
<link rel="import" href="../../custom_components/datalab-terminal/datalab-terminal.html">

<dom-module id="datalab-app">
  <template>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      .datalab-contents {
        display: flex;
        height: 100%;
      }
      .datalab-sidebar {
        width: 100px;
      }
      .datalab-main-content {
        width: 100%;
        padding: 20px;
      }
    </style>
    <datalab-toolbar></datalab-toolbar>
    <div class="datalab-contents">
      <div class="datalab-sidebar">
        <datalab-sidebar selected=[[page]]></datalab-sidebar>
      </div>
      <div class="datalab-main-content">
        <iron-pages selected="{{page}}" attr-for-selected="name" fallback-selection="files">
          <datalab-files name="files"></datalab-files>
          <datalab-data name="data"></datalab-data>
          <datalab-sessions name="sessions"></datalab-sessions>
          <datalab-editor name="editor"></datalab-editor>
          <datalab-terminal name="terminal"></datalab-terminal>
        </iron-pages>
      </div>
    </div>
  </template>
</dom-module>

<script>
  class DatalabAppElement extends Polymer.Element {

    static get is() { return "datalab-app"; }

    static get properties() {
      return {
        page: {
          type: String,
          value: "files"
        }
      }
    }

    ready() {
      super.ready();
      document.addEventListener('sidebarPageSelected', e => {
        this.page = e.detail;
      });
    }

  }
  customElements.define(DatalabAppElement.is, DatalabAppElement);
</script>
