<link rel="import" href="../../custom_components/shared-styles/shared-styles.html">
<link rel="import" href="../../custom_components/item-list/item-list.html">

<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-icons/hardware-icons.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-progress/paper-progress.html">

<dom-module id="datalab-files">
  <template>

    <style include="datalab-shared-styles">
      #toolbar {
        height: var(--toolbar-height);
        width: 100%;
        background-color: var(--app-secondary-color);
      }
      .toolbar-button {
        color: var(--app-primary-color);
        margin: 4px 12px 4px 12px;
        font-weight: normal;
      }
      .toolbar-button > iron-icon {
        width: 20px;
        padding-right: 5px;
      }
      #file-picker {
        height: calc(100% - var(--toolbar-height));
      }
      #files-nav {
        display: flex;
        height: calc(var(--toolbar-height) - 2px);
        border-top: 1px solid #eee;
        border-bottom: 1px solid #eee;
      }
      .nav-arrow {
        min-width: 35px;
        margin: 0px;
      }
      .nav-arrow[disabled] {
        border-radius: 0px;
        background-color: #fff;
      }
      #files-header {
        user-select: none;
        height: var(--toolbar-height);
        display: flex;
        line-height: var(--toolbar-height);
      }
      .files-row {
        display: flex;
        height: 30px;
        line-height: 30px;
      }
      .checkbox-col {
        flex-basis: 50px;
        text-align: center;
      }
      .name-col {
        flex-grow: 1;
      }
      .status-col {
        flex-basis: 200px;
      }
      .files-container {
        height: calc(100% - 2*var(--toolbar-height) - 1px); /* 2 borders + 1 progress bar */
      }
      .vseparator {
        display: inline;
        border-left: 1px solid #f4f4f4;
        line-height: 48px;
      }
      #breadcrumb {
        user-select: none;
        list-style: none;
        display: inline-block;
      }
      #breadcrumb div {
        float: left;
        height: 100%;
      }
      #breadcrumb div a {
        display: block;
        background: #fff;
        text-decoration: none;
        position: relative;
        line-height: 46px;
        margin-right: 25px;
        height: 100%;
        color: var(--selection-fg-color);
      }
      #breadcrumb div:first-child a {
        padding-left: 15px;
      }
      #breadcrumb div:first-child a:before {
        border: none;
      }
      #breadcrumb div a:before, #breadcrumb div a:after {
        content: "";
        position: absolute;
        border: 0 solid #fff;
        border-width: 23px 12px;
      }
      #breadcrumb div a:before {
        left: -23px;
        border-left-color: transparent;
      }
      #breadcrumb div a:after {
        left: 100%;
        border-color: var(--app-secondary-color);
        border-left-color: #fff;
      }
      #breadcrumb div a:hover {
        background-color: #f2f2f2;
      }
      #breadcrumb div a:hover:before {
        border-color: #f2f2f2;
        border-left-color: transparent;
      }
      #breadcrumb div a:hover:after {
        border-left-color: #f2f2f2;
      }
      #breadcrumb div:nth-last-child(2) a {
        padding-right: 15px;
      }
      #breadcrumb div:nth-last-child(2) a:after {
        border: none;
      }
      paper-progress {
        width: 100%;
        height: 1px;
        --paper-progress-active-color: var(--selection-fg-color);
      }
    </style>

    <div id="toolbar">
      <paper-button class="toolbar-button">
        <iron-icon icon="add-box"></iron-icon>
        <span>Notebook</span>
      </paper-button>
      <paper-button class="toolbar-button">
        <iron-icon icon="add-box"></iron-icon>
        <span>Folder</span>
      </paper-button>
      <paper-button class="toolbar-button">
        <iron-icon icon="content-copy"></iron-icon>
        <span>Copy</span>
      </paper-button>
      <paper-button class="toolbar-button">
        <iron-icon icon="file-upload"></iron-icon>
        <span>Upload</span>
      </paper-button>
      <paper-button class="toolbar-button">
        <iron-icon icon="delete"></iron-icon>
        <span>Delete</span>
      </paper-button>
    </div>
    <div id="file-picker">
      <div id="files-nav">
        <paper-button id="backNav" class="nav-arrow" on-click="_navBackward">
          <iron-icon icon="chevron-left"></iron-icon>
        </paper-button>
        <paper-button id="forwardNav" class="nav-arrow" on-click="_navForward">
          <iron-icon icon="chevron-right"></iron-icon>
        </paper-button>
        <paper-button class="nav-arrow" on-click="_loadFileList">
          <iron-icon icon="refresh"></iron-icon>
        </paper-button>
        <div class="vseparator"></div>
        <div id="breadcrumb">
          <div>
            <a id="home-crumb" href="#" on-click="_crumbClicked">/</a>
          </div>
          <template id="breadcrumbsTemplate" is="dom-repeat" items={{currentCrumbs}}>
            <div>
              <a href="#" on-click="_crumbClicked">{{item}}</a>
            </div>
          </template>
        </div>
      </div>
      <div id="files-header">
        <div class="checkbox-col"></div>
        <div class="name-col"><strong>Name</strong></div>
        <div class="status-col"><strong>Status</strong></div>
      </div>
      <paper-progress id="progressBar" indeterminate disabled={{!_fetching}}></paper-progress>
      <div class="files-container">
        <item-list id="files"></item-list>
      </div>
    </div>

  </template>
</dom-module>

<script src="ContentManager.js"></script>
<script src="datalab-files.js"></script>
